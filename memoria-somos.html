<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SOMOS Â· Memoria</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a1628;
    --surface: #112240;
    --card-back: #1a3a5c;
    --card-front: #0d2137;
    --accent: #64ffda;
    --accent2: #f7c948;
    --accent3: #ff6b9d;
    --text: #ccd6f6;
    --text-dim: #8892b0;
    --match: #64ffda;
    --glow: rgba(100,255,218,0.3);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Nunito', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 16px;
    overflow: hidden;
  }

  /* Fondo animado */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      radial-gradient(ellipse at 20% 20%, rgba(100,255,218,0.06) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, rgba(247,201,72,0.06) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 50%, rgba(255,107,157,0.04) 0%, transparent 60%);
    pointer-events: none;
    animation: bgPulse 8s ease-in-out infinite alternate;
  }

  @keyframes bgPulse {
    from { opacity: 0.5; }
    to { opacity: 1; }
  }

  /* Header */
  .header {
    text-align: center;
    margin-bottom: 20px;
    position: relative;
    z-index: 1;
  }

  .logo {
    font-family: 'Fredoka One', cursive;
    font-size: 28px;
    color: var(--accent);
    text-shadow: 0 0 30px var(--glow);
    letter-spacing: 3px;
  }

  .subtitle {
    font-size: 11px;
    color: var(--text-dim);
    letter-spacing: 4px;
    text-transform: uppercase;
    margin-top: 2px;
  }

  /* Stats bar */
  .stats {
    display: flex;
    gap: 20px;
    margin-bottom: 16px;
    position: relative;
    z-index: 1;
  }

  .stat {
    background: var(--surface);
    border: 1px solid rgba(100,255,218,0.15);
    border-radius: 12px;
    padding: 8px 18px;
    text-align: center;
  }

  .stat-val {
    font-family: 'Fredoka One', cursive;
    font-size: 22px;
    color: var(--accent);
    line-height: 1;
  }

  .stat-label {
    font-size: 9px;
    color: var(--text-dim);
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-top: 2px;
  }

  /* Difficulty selector */
  .diff-row {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
    position: relative;
    z-index: 1;
  }

  .diff-btn {
    background: transparent;
    border: 1px solid rgba(100,255,218,0.2);
    color: var(--text-dim);
    font-family: 'Nunito', sans-serif;
    font-size: 11px;
    font-weight: 800;
    letter-spacing: 1px;
    padding: 5px 14px;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.2s;
    text-transform: uppercase;
  }

  .diff-btn:hover, .diff-btn.active {
    background: rgba(100,255,218,0.1);
    border-color: var(--accent);
    color: var(--accent);
  }

  /* Game grid */
  .grid {
    display: grid;
    gap: 10px;
    position: relative;
    z-index: 1;
  }

  .grid-4 { grid-template-columns: repeat(4, 1fr); }
  .grid-5 { grid-template-columns: repeat(5, 1fr); }
  .grid-6 { grid-template-columns: repeat(6, 1fr); }

  /* Card */
  .card {
    width: 72px;
    height: 72px;
    perspective: 600px;
    cursor: pointer;
  }

  @media (max-width: 480px) {
    .card { width: 58px; height: 58px; }
    .grid { gap: 7px; }
  }

  .card-inner {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.45s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 14px;
  }

  .card.flipped .card-inner { transform: rotateY(180deg); }

  .card-front, .card-back {
    position: absolute;
    inset: 0;
    border-radius: 14px;
    backface-visibility: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Dorso de la carta */
  .card-back {
    background: var(--card-back);
    border: 2px solid rgba(100,255,218,0.2);
    font-size: 26px;
    overflow: hidden;
  }

  .card-back::before {
    content: 'âœ¦';
    font-size: 28px;
    color: rgba(100,255,218,0.3);
    transition: all 0.2s;
  }

  .card:hover:not(.matched) .card-back::before {
    color: rgba(100,255,218,0.6);
    transform: scale(1.2);
  }

  /* PatrÃ³n decorativo en el dorso */
  .card-back::after {
    content: '';
    position: absolute;
    inset: 4px;
    border: 1px solid rgba(100,255,218,0.1);
    border-radius: 10px;
  }

  /* Frente de la carta */
  .card-front {
    background: var(--card-front);
    border: 2px solid rgba(100,255,218,0.3);
    transform: rotateY(180deg);
    font-size: 34px;
    flex-direction: column;
    gap: 2px;
  }

  .card-emoji {
    font-size: 32px;
    line-height: 1;
  }

  @media (max-width: 480px) {
    .card-emoji { font-size: 26px; }
  }

  /* Carta encontrada */
  .card.matched .card-inner {
    transform: rotateY(180deg);
  }

  .card.matched .card-front {
    background: rgba(100,255,218,0.08);
    border-color: var(--accent);
    box-shadow: 0 0 20px rgba(100,255,218,0.2), inset 0 0 20px rgba(100,255,218,0.05);
    animation: matchPop 0.4s ease;
  }

  @keyframes matchPop {
    0% { transform: rotateY(180deg) scale(1); }
    50% { transform: rotateY(180deg) scale(1.15); }
    100% { transform: rotateY(180deg) scale(1); }
  }

  /* Wrong shake */
  .card.wrong .card-inner {
    animation: shake 0.4s ease;
  }

  @keyframes shake {
    0%, 100% { transform: rotateY(180deg) translateX(0); }
    25% { transform: rotateY(180deg) translateX(-6px); }
    75% { transform: rotateY(180deg) translateX(6px); }
  }

  /* BotÃ³n nuevo juego */
  .btn-new {
    margin-top: 16px;
    background: transparent;
    border: 2px solid var(--accent);
    color: var(--accent);
    font-family: 'Fredoka One', cursive;
    font-size: 14px;
    letter-spacing: 2px;
    padding: 10px 28px;
    border-radius: 30px;
    cursor: pointer;
    transition: all 0.2s;
    text-transform: uppercase;
    position: relative;
    z-index: 1;
  }

  .btn-new:hover {
    background: rgba(100,255,218,0.1);
    box-shadow: 0 0 20px var(--glow);
    transform: translateY(-2px);
  }

  /* Win screen */
  .win-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(10,22,40,0.95);
    z-index: 100;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 16px;
    backdrop-filter: blur(10px);
  }

  .win-overlay.show { display: flex; }

  .win-emoji { font-size: 64px; animation: bounce 0.8s ease infinite alternate; }
  @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-15px); } }

  .win-title {
    font-family: 'Fredoka One', cursive;
    font-size: 36px;
    color: var(--accent);
    text-shadow: 0 0 40px var(--glow);
    letter-spacing: 3px;
  }

  .win-sub {
    font-size: 13px;
    color: var(--text-dim);
    letter-spacing: 3px;
    text-transform: uppercase;
  }

  .win-stats {
    display: flex;
    gap: 20px;
    margin: 8px 0;
  }

  /* Particles */
  .particle {
    position: fixed;
    pointer-events: none;
    font-size: 20px;
    animation: float-up 1.5s ease forwards;
    z-index: 200;
  }

  @keyframes float-up {
    0% { opacity: 1; transform: translateY(0) scale(1) rotate(0deg); }
    100% { opacity: 0; transform: translateY(-120px) scale(0.5) rotate(360deg); }
  }
</style>
</head>
<body>

<div class="header">
  <div class="logo">SOMOS âœ¦ MEMORIA</div>
  <div class="subtitle">despierta tu consciencia</div>
</div>

<div class="stats">
  <div class="stat">
    <div class="stat-val" id="movesVal">0</div>
    <div class="stat-label">Movimientos</div>
  </div>
  <div class="stat">
    <div class="stat-val" id="pairsVal">0</div>
    <div class="stat-label">Parejas</div>
  </div>
  <div class="stat">
    <div class="stat-val" id="timerVal">0:00</div>
    <div class="stat-label">Tiempo</div>
  </div>
</div>

<div class="diff-row">
  <button class="diff-btn active" onclick="setDiff(4, this)">FÃ¡cil 4Ã—4</button>
  <button class="diff-btn" onclick="setDiff(5, this)">Medio 5Ã—4</button>
  <button class="diff-btn" onclick="setDiff(6, this)">DifÃ­cil 6Ã—6</button>
</div>

<div class="grid grid-4" id="grid"></div>

<button class="btn-new" onclick="newGame()">â†º Nuevo Juego</button>

<!-- Win overlay -->
<div class="win-overlay" id="winOverlay">
  <div class="win-emoji">ðŸŒŸ</div>
  <div class="win-title">Â¡SOMOS UNO!</div>
  <div class="win-sub">completaste el juego</div>
  <div class="win-stats">
    <div class="stat">
      <div class="stat-val" id="winMoves">0</div>
      <div class="stat-label">Movimientos</div>
    </div>
    <div class="stat">
      <div class="stat-val" id="winTime">0:00</div>
      <div class="stat-label">Tiempo</div>
    </div>
  </div>
  <button class="btn-new" onclick="closeWin()">âœ¦ Jugar de Nuevo</button>
</div>

<script>
  const EMOJIS = [
    'ðŸŒŠ','ðŸ”¥','ðŸŒ¿','ðŸŒ','ðŸŒ™','â­','ðŸ¦‹','ðŸ‰',
    'ðŸŒ¸','ðŸ¦…','ðŸ’Ž','ðŸŒˆ','ðŸƒ','ðŸŒº','ðŸ¦','ðŸ¬',
    'ðŸŒ»','ðŸ•Šï¸','ðŸ¦œ','ðŸŒ™','ðŸ’«','ðŸŒŠ','ðŸŽ‹','ðŸ„',
    'ðŸ¦Š','ðŸº','ðŸŒµ','ðŸŒ‹','â„ï¸','ðŸŒªï¸','âš¡','ðŸŒ '
  ];

  let cols = 4;
  let cards = [];
  let flipped = [];
  let matched = [];
  let moves = 0;
  let pairs = 0;
  let totalPairs = 0;
  let locked = false;
  let timerInterval = null;
  let seconds = 0;
  let gameStarted = false;

  function setDiff(c, btn) {
    cols = c;
    document.querySelectorAll('.diff-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    const grid = document.getElementById('grid');
    grid.className = 'grid grid-' + c;
    newGame();
  }

  function newGame() {
    clearInterval(timerInterval);
    seconds = 0;
    moves = 0;
    pairs = 0;
    flipped = [];
    matched = [];
    locked = false;
    gameStarted = false;
    updateStats();
    document.getElementById('winOverlay').classList.remove('show');

    // Calcular cuÃ¡ntas parejas
    let rows = cols === 5 ? 4 : cols;
    totalPairs = (cols * rows) / 2;

    // Seleccionar emojis
    const selected = EMOJIS.slice(0, totalPairs);
    cards = shuffle([...selected, ...selected]);

    renderGrid(cols, rows);
  }

  function renderGrid(c, r) {
    const grid = document.getElementById('grid');
    grid.innerHTML = '';
    grid.className = 'grid grid-' + c;
    grid.style.gridTemplateColumns = `repeat(${c}, 1fr)`;

    cards.forEach((emoji, i) => {
      const card = document.createElement('div');
      card.className = 'card';
      card.dataset.index = i;
      card.dataset.emoji = emoji;
      card.innerHTML = `
        <div class="card-inner">
          <div class="card-back"></div>
          <div class="card-front">
            <div class="card-emoji">${emoji}</div>
          </div>
        </div>
      `;
      card.addEventListener('click', () => flipCard(card, i));
      grid.appendChild(card);

      // Entrada animada escalonada
      card.style.opacity = '0';
      card.style.transform = 'scale(0.5)';
      setTimeout(() => {
        card.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
        card.style.opacity = '1';
        card.style.transform = 'scale(1)';
      }, i * 40);
    });
  }

  function flipCard(card, index) {
    if (locked) return;
    if (card.classList.contains('flipped')) return;
    if (card.classList.contains('matched')) return;

    // Iniciar timer al primer click
    if (!gameStarted) {
      gameStarted = true;
      timerInterval = setInterval(() => {
        seconds++;
        updateStats();
      }, 1000);
    }

    card.classList.add('flipped');
    flipped.push({ card, index, emoji: cards[index] });

    if (flipped.length === 2) {
      moves++;
      updateStats();
      checkMatch();
    }
  }

  function checkMatch() {
    locked = true;
    const [a, b] = flipped;

    if (a.emoji === b.emoji) {
      // Â¡Match!
      setTimeout(() => {
        a.card.classList.add('matched');
        b.card.classList.add('matched');
        spawnParticles(a.card);
        flipped = [];
        locked = false;
        pairs++;
        updateStats();

        if (pairs === totalPairs) {
          setTimeout(showWin, 600);
        }
      }, 400);
    } else {
      // No match
      a.card.classList.add('wrong');
      b.card.classList.add('wrong');
      setTimeout(() => {
        a.card.classList.remove('flipped', 'wrong');
        b.card.classList.remove('flipped', 'wrong');
        flipped = [];
        locked = false;
      }, 900);
    }
  }

  function updateStats() {
    document.getElementById('movesVal').textContent = moves;
    document.getElementById('pairsVal').textContent = pairs;
    document.getElementById('timerVal').textContent = formatTime(seconds);
  }

  function formatTime(s) {
    return `${Math.floor(s/60)}:${String(s%60).padStart(2,'0')}`;
  }

  function showWin() {
    clearInterval(timerInterval);
    document.getElementById('winMoves').textContent = moves;
    document.getElementById('winTime').textContent = formatTime(seconds);
    document.getElementById('winOverlay').classList.add('show');
    // Lluvia de partÃ­culas
    for (let i = 0; i < 20; i++) {
      setTimeout(() => spawnRandom(), i * 100);
    }
  }

  function closeWin() {
    document.getElementById('winOverlay').classList.remove('show');
    newGame();
  }

  function spawnParticles(card) {
    const rect = card.getBoundingClientRect();
    const cx = rect.left + rect.width / 2;
    const cy = rect.top + rect.height / 2;
    ['âœ¦','â­','ðŸ’«','ðŸŒŸ'].forEach((sym, i) => {
      const p = document.createElement('div');
      p.className = 'particle';
      p.textContent = sym;
      p.style.left = (cx + (Math.random()-0.5)*40) + 'px';
      p.style.top = cy + 'px';
      p.style.animationDelay = (i * 0.1) + 's';
      document.body.appendChild(p);
      setTimeout(() => p.remove(), 1600);
    });
  }

  function spawnRandom() {
    const emojis = ['ðŸŒŠ','ðŸ”¥','ðŸŒ¿','ðŸŒ™','â­','ðŸ¦‹','ðŸ’Ž','ðŸŒ¸','âœ¦','ðŸ’«'];
    const p = document.createElement('div');
    p.className = 'particle';
    p.textContent = emojis[Math.floor(Math.random()*emojis.length)];
    p.style.left = Math.random() * window.innerWidth + 'px';
    p.style.top = Math.random() * window.innerHeight + 'px';
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 1600);
  }

  function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  newGame();
</script>
</body>
</html>
